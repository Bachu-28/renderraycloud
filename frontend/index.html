<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>RenderRayCloud ‚Äî Professional Cloud Rendering</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg: #050508;
  --bg2: #0a0a10;
  --bg3: #0f0f18;
  --card: #111120;
  --card2: #161628;
  --border: #1e1e35;
  --border2: #252540;
  --accent: #4f6ef7;
  --accent2: #7c3aed;
  --accent3: #06b6d4;
  --glow: rgba(79,110,247,0.15);
  --glow2: rgba(124,58,237,0.12);
  --text: #e8e8f0;
  --text2: #9090b0;
  --text3: #5a5a7a;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --font: 'Syne', sans-serif;
  --mono: 'JetBrains Mono', monospace;
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font);
  min-height: 100vh;
  overflow-x: hidden;
}

/* NOISE TEXTURE */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
  opacity: 0.4;
}

/* GRID BACKGROUND */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: 
    linear-gradient(rgba(79,110,247,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(79,110,247,0.03) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none;
  z-index: 0;
}

/* NAV */
nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 40px;
  height: 64px;
  background: rgba(5,5,8,0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  font-weight: 800;
  letter-spacing: -0.5px;
}

.logo-icon {
  width: 32px; height: 32px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 16px;
}

.logo span { color: var(--accent); }

.nav-links {
  display: flex;
  gap: 32px;
  list-style: none;
}

.nav-links a {
  color: var(--text2);
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  transition: color 0.2s;
}

.nav-links a:hover { color: var(--text); }

.nav-cta {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 8px 20px;
  border-radius: 8px;
  font-family: var(--font);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.nav-cta:hover {
  background: #3d5ce8;
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(79,110,247,0.4);
}

/* PAGES */
.page { display: none; padding-top: 64px; min-height: 100vh; position: relative; z-index: 1; }
.page.active { display: block; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LANDING PAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.hero {
  min-height: calc(100vh - 64px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 80px 40px;
  position: relative;
}

.hero-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  pointer-events: none;
}

.hero-orb-1 {
  width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(79,110,247,0.08) 0%, transparent 70%);
  top: -100px; left: 50%;
  transform: translateX(-50%);
}

.hero-orb-2 {
  width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(124,58,237,0.06) 0%, transparent 70%);
  bottom: 0; right: 10%;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(79,110,247,0.1);
  border: 1px solid rgba(79,110,247,0.2);
  padding: 6px 16px;
  border-radius: 100px;
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-bottom: 32px;
  animation: fadeInUp 0.6s ease both;
}

.hero-badge::before {
  content: '';
  width: 6px; height: 6px;
  background: var(--accent);
  border-radius: 50%;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.5); }
}

.hero h1 {
  font-size: clamp(48px, 8vw, 96px);
  font-weight: 800;
  line-height: 1.0;
  letter-spacing: -3px;
  margin-bottom: 24px;
  animation: fadeInUp 0.6s ease 0.1s both;
}

.hero h1 .line2 {
  background: linear-gradient(135deg, var(--accent), var(--accent2), var(--accent3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero p {
  font-size: 18px;
  color: var(--text2);
  max-width: 560px;
  line-height: 1.7;
  margin-bottom: 48px;
  animation: fadeInUp 0.6s ease 0.2s both;
}

.hero-actions {
  display: flex;
  gap: 16px;
  animation: fadeInUp 0.6s ease 0.3s both;
}

.btn-primary {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: #fff;
  border: none;
  padding: 14px 32px;
  border-radius: 10px;
  font-family: var(--font);
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 0 30px rgba(79,110,247,0.3);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 40px rgba(79,110,247,0.5);
}

.btn-secondary {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border2);
  padding: 14px 32px;
  border-radius: 10px;
  font-family: var(--font);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-secondary:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: rgba(79,110,247,0.05);
}

/* STATS */
.stats-bar {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1px;
  background: var(--border);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  max-width: 800px;
  margin: 80px auto 0;
  animation: fadeInUp 0.6s ease 0.4s both;
}

.stat {
  background: var(--card);
  padding: 28px 24px;
  text-align: center;
}

.stat-num {
  font-size: 32px;
  font-weight: 800;
  background: linear-gradient(135deg, var(--accent), var(--accent3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.stat-label {
  font-size: 12px;
  color: var(--text3);
  margin-top: 4px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* SOFTWARE SECTION */
.section {
  padding: 100px 40px;
  max-width: 1200px;
  margin: 0 auto;
}

.section-label {
  font-size: 11px;
  font-weight: 700;
  color: var(--accent);
  letter-spacing: 3px;
  text-transform: uppercase;
  margin-bottom: 16px;
}

.section-title {
  font-size: clamp(32px, 4vw, 48px);
  font-weight: 800;
  letter-spacing: -1.5px;
  margin-bottom: 16px;
}

.section-sub {
  color: var(--text2);
  font-size: 16px;
  max-width: 480px;
  line-height: 1.6;
  margin-bottom: 60px;
}

.software-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

.software-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 28px;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.software-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--glow), transparent);
  opacity: 0;
  transition: opacity 0.3s;
}

.software-card:hover {
  border-color: var(--accent);
  transform: translateY(-4px);
  box-shadow: 0 20px 60px rgba(79,110,247,0.15);
}

.software-card:hover::before { opacity: 1; }

.sw-icon {
  font-size: 36px;
  margin-bottom: 16px;
}

.sw-name {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 8px;
}

.sw-desc {
  font-size: 13px;
  color: var(--text2);
  line-height: 1.5;
}

.sw-tag {
  display: inline-block;
  margin-top: 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--accent);
  background: rgba(79,110,247,0.1);
  padding: 3px 10px;
  border-radius: 100px;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.dashboard {
  display: grid;
  grid-template-columns: 240px 1fr;
  min-height: calc(100vh - 64px);
}

.sidebar {
  background: var(--bg2);
  border-right: 1px solid var(--border);
  padding: 32px 16px;
  position: sticky;
  top: 64px;
  height: calc(100vh - 64px);
}

.sidebar-section {
  margin-bottom: 32px;
}

.sidebar-label {
  font-size: 10px;
  font-weight: 700;
  color: var(--text3);
  letter-spacing: 2px;
  text-transform: uppercase;
  padding: 0 12px;
  margin-bottom: 8px;
}

.sidebar-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: var(--text2);
  transition: all 0.2s;
  margin-bottom: 2px;
}

.sidebar-item:hover {
  background: var(--card);
  color: var(--text);
}

.sidebar-item.active {
  background: rgba(79,110,247,0.1);
  color: var(--accent);
}

.sidebar-item .icon { font-size: 16px; width: 20px; text-align: center; }

.main-content {
  padding: 40px;
  overflow-y: auto;
}

.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 40px;
}

.page-title {
  font-size: 28px;
  font-weight: 800;
  letter-spacing: -0.5px;
}

.page-sub {
  font-size: 14px;
  color: var(--text2);
  margin-top: 4px;
}

/* DASHBOARD CARDS */
.metrics-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
  margin-bottom: 32px;
}

.metric-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 24px;
  position: relative;
  overflow: hidden;
}

.metric-card::after {
  content: '';
  position: absolute;
  top: 0; right: 0;
  width: 60px; height: 60px;
  background: radial-gradient(circle at top right, var(--glow), transparent);
}

.metric-label {
  font-size: 12px;
  color: var(--text2);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.metric-value {
  font-size: 36px;
  font-weight: 800;
  letter-spacing: -1px;
}

.metric-value.blue { color: var(--accent); }
.metric-value.purple { color: #a78bfa; }
.metric-value.cyan { color: var(--accent3); }
.metric-value.green { color: var(--success); }

.metric-change {
  font-size: 12px;
  color: var(--success);
  margin-top: 8px;
  font-family: var(--mono);
}

/* JOBS TABLE */
.jobs-section {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
}

.jobs-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--border);
}

.jobs-title { font-size: 16px; font-weight: 700; }

.jobs-table { width: 100%; border-collapse: collapse; }

.jobs-table th {
  text-align: left;
  padding: 12px 24px;
  font-size: 11px;
  font-weight: 700;
  color: var(--text3);
  text-transform: uppercase;
  letter-spacing: 1px;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
}

.jobs-table td {
  padding: 16px 24px;
  font-size: 14px;
  border-bottom: 1px solid var(--border);
  vertical-align: middle;
}

.jobs-table tr:last-child td { border-bottom: none; }
.jobs-table tr:hover td { background: rgba(79,110,247,0.03); }

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  border-radius: 100px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.status-badge::before {
  content: '';
  width: 5px; height: 5px;
  border-radius: 50%;
}

.status-rendering { background: rgba(79,110,247,0.1); color: var(--accent); }
.status-rendering::before { background: var(--accent); animation: pulse 2s infinite; }
.status-done { background: rgba(16,185,129,0.1); color: var(--success); }
.status-done::before { background: var(--success); }
.status-queued { background: rgba(245,158,11,0.1); color: var(--warning); }
.status-queued::before { background: var(--warning); }
.status-error { background: rgba(239,68,68,0.1); color: var(--error); }
.status-error::before { background: var(--error); }

.progress-bar {
  background: var(--bg);
  border-radius: 100px;
  height: 4px;
  width: 120px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent3));
  border-radius: 100px;
  transition: width 0.3s;
}

.action-btn {
  background: transparent;
  border: 1px solid var(--border2);
  color: var(--text2);
  padding: 5px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  font-family: var(--font);
  transition: all 0.2s;
  margin-right: 4px;
}

.action-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SUBMIT JOB PAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.submit-layout {
  max-width: 900px;
}

.step-indicator {
  display: flex;
  align-items: center;
  gap: 0;
  margin-bottom: 40px;
}

.step {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
}

.step-num {
  width: 32px; height: 32px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 13px;
  font-weight: 700;
  background: var(--bg3);
  border: 1px solid var(--border);
  color: var(--text3);
  flex-shrink: 0;
}

.step.active .step-num {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}

.step.done .step-num {
  background: var(--success);
  border-color: var(--success);
  color: #fff;
}

.step-label { font-size: 13px; font-weight: 600; color: var(--text3); }
.step.active .step-label { color: var(--text); }

.step-line {
  flex: 1;
  height: 1px;
  background: var(--border);
  margin: 0 12px;
}

.form-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 40px;
  margin-bottom: 20px;
}

.form-card-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 28px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.form-group { display: flex; flex-direction: column; gap: 8px; }
.form-group.full { grid-column: 1 / -1; }

.form-label {
  font-size: 12px;
  font-weight: 700;
  color: var(--text2);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.form-input, .form-select {
  background: var(--bg2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 12px 16px;
  border-radius: 10px;
  font-family: var(--font);
  font-size: 14px;
  transition: all 0.2s;
  outline: none;
}

.form-input:focus, .form-select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(79,110,247,0.1);
}

.form-select option { background: var(--card); }

/* UPLOAD ZONE */
.upload-zone {
  border: 2px dashed var(--border2);
  border-radius: 16px;
  padding: 60px 40px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  background: var(--bg2);
  position: relative;
}

.upload-zone:hover, .upload-zone.dragover {
  border-color: var(--accent);
  background: rgba(79,110,247,0.05);
}

.upload-icon { font-size: 48px; margin-bottom: 16px; }

.upload-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 8px;
}

.upload-sub {
  font-size: 14px;
  color: var(--text2);
  margin-bottom: 20px;
}

.upload-formats {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
}

.format-tag {
  background: var(--bg3);
  border: 1px solid var(--border);
  color: var(--text2);
  font-size: 11px;
  font-weight: 700;
  font-family: var(--mono);
  padding: 4px 10px;
  border-radius: 6px;
}

#fileInput { display: none; }

.file-selected {
  background: rgba(16,185,129,0.1);
  border: 1px solid rgba(16,185,129,0.3);
  border-radius: 10px;
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
  display: none;
}

.file-selected.show { display: flex; }

/* SOFTWARE SELECTOR */
.software-selector {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.sw-option {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--bg2);
}

.sw-option:hover { border-color: var(--border2); }

.sw-option.selected {
  border-color: var(--accent);
  background: rgba(79,110,247,0.08);
}

.sw-option-icon { font-size: 24px; }
.sw-option-name { font-size: 14px; font-weight: 600; }
.sw-option-ext { font-size: 11px; color: var(--text3); font-family: var(--mono); }

/* ANALYSIS RESULTS */
.analysis-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  overflow: hidden;
  margin-bottom: 20px;
}

.analysis-header {
  background: linear-gradient(135deg, rgba(79,110,247,0.1), rgba(124,58,237,0.08));
  border-bottom: 1px solid var(--border);
  padding: 24px 32px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.analysis-title { font-size: 18px; font-weight: 700; }
.analysis-status { font-size: 13px; color: var(--success); font-weight: 600; }

.analysis-body { padding: 32px; }

.analysis-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-bottom: 32px;
}

.analysis-item {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
}

.analysis-item-label {
  font-size: 11px;
  font-weight: 700;
  color: var(--text3);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 8px;
}

.analysis-item-value {
  font-size: 20px;
  font-weight: 700;
  font-family: var(--mono);
}

.tips-list { margin-top: 24px; }
.tips-title { font-size: 14px; font-weight: 700; margin-bottom: 12px; color: var(--text2); }

.tip-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px;
  border-radius: 8px;
  font-size: 13px;
  margin-bottom: 8px;
  font-family: var(--mono);
}

.tip-warn { background: rgba(245,158,11,0.08); color: var(--warning); }
.tip-ok { background: rgba(16,185,129,0.08); color: var(--success); }
.tip-error { background: rgba(239,68,68,0.08); color: var(--error); }

/* LOADING */
.loading-overlay {
  position: fixed;
  inset: 0;
  background: rgba(5,5,8,0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 200;
  display: none;
  backdrop-filter: blur(10px);
}

.loading-overlay.show { display: flex; }

.loader {
  width: 60px; height: 60px;
  border: 3px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 24px;
}

@keyframes spin { to { transform: rotate(360deg); } }

.loading-text {
  font-size: 16px;
  font-weight: 600;
  color: var(--text2);
}

.loading-sub {
  font-size: 13px;
  color: var(--text3);
  margin-top: 8px;
  font-family: var(--mono);
}

/* TOAST */
.toast {
  position: fixed;
  bottom: 32px;
  right: 32px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 14px;
  font-weight: 600;
  z-index: 300;
  transform: translateY(100px);
  opacity: 0;
  transition: all 0.3s;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}

.toast.show {
  transform: translateY(0);
  opacity: 1;
}

.toast.success { border-color: rgba(16,185,129,0.3); }
.toast.error { border-color: rgba(239,68,68,0.3); }

/* ANIMATIONS */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* API STATUS */
.api-status {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-family: var(--mono);
  color: var(--text3);
}

.api-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--text3);
}

.api-dot.connected { background: var(--success); animation: pulse 2s infinite; }
.api-dot.error { background: var(--error); }

/* RESPONSIVE */
@media (max-width: 768px) {
  nav { padding: 0 20px; }
  .nav-links { display: none; }
  .software-grid, .metrics-grid { grid-template-columns: 1fr 1fr; }
  .dashboard { grid-template-columns: 1fr; }
  .sidebar { display: none; }
  .form-grid { grid-template-columns: 1fr; }
  .software-selector { grid-template-columns: 1fr 1fr; }
  .analysis-grid { grid-template-columns: 1fr; }
  .stats-bar { grid-template-columns: 1fr 1fr; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="logo">
    <div class="logo-icon">‚ö°</div>
    Render<span>Ray</span>Cloud
  </div>
  <ul class="nav-links">
    <li><a href="#" onclick="showPage('landing')">Home</a></li>
    <li><a href="#" onclick="showPage('dashboard')">Dashboard</a></li>
    <li><a href="#" onclick="showPage('submit')">Submit Job</a></li>
  </ul>
  <div style="display:flex;align-items:center;gap:16px;">
    <div class="api-status">
      <div class="api-dot" id="apiDot"></div>
      <span id="apiStatusText">Connecting...</span>
    </div>
    <button class="nav-cta" onclick="showPage('submit')">New Render ‚Üí</button>
  </div>
</nav>

<!-- LOADING -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loader"></div>
  <div class="loading-text" id="loadingText">Analyzing scene...</div>
  <div class="loading-sub" id="loadingSub">Please wait while we process your file</div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <span id="toastIcon">‚úÖ</span>
  <span id="toastMsg">Success!</span>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LANDING PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page active" id="page-landing">
  <div class="hero">
    <div class="hero-orb hero-orb-1"></div>
    <div class="hero-orb hero-orb-2"></div>
    <div class="hero-badge">Powered by Fox Renderfarm</div>
    <h1>
      Cloud Rendering<br>
      <span class="line2">Reimagined.</span>
    </h1>
    <p>Submit your 3D scenes, analyze assets, and render at scale ‚Äî all from one beautiful platform. Maya, Houdini, Blender, and more.</p>
    <div class="hero-actions">
      <button class="btn-primary" onclick="showPage('submit')">Start Rendering ‚Üí</button>
      <button class="btn-secondary" onclick="showPage('dashboard')">View Dashboard</button>
    </div>
    <div class="stats-bar">
      <div class="stat">
        <div class="stat-num">50K+</div>
        <div class="stat-label">Renders Done</div>
      </div>
      <div class="stat">
        <div class="stat-num">6</div>
        <div class="stat-label">3D Softwares</div>
      </div>
      <div class="stat">
        <div class="stat-num">99.9%</div>
        <div class="stat-label">Uptime</div>
      </div>
      <div class="stat">
        <div class="stat-num">24/7</div>
        <div class="stat-label">Support</div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-label">Supported Software</div>
    <div class="section-title">Everything you render,<br>we support.</div>
    <div class="section-sub">From Maya VFX pipelines to Blender animations ‚Äî full analysis, asset detection, and cloud rendering for all major 3D tools.</div>
    <div class="software-grid">
      <div class="software-card" onclick="showPage('submit')">
        <div class="sw-icon">üé¨</div>
        <div class="sw-name">Autodesk Maya</div>
        <div class="sw-desc">Full scene analysis with Arnold, V-Ray, and RenderMan support.</div>
        <div class="sw-tag">.ma .mb</div>
      </div>
      <div class="software-card" onclick="showPage('submit')">
        <div class="sw-icon">üåä</div>
        <div class="sw-name">SideFX Houdini</div>
        <div class="sw-desc">Multi-ROP node support with Mantra and Karma rendering.</div>
        <div class="sw-tag">.hip .hiplc</div>
      </div>
      <div class="software-card" onclick="showPage('submit')">
        <div class="sw-icon">üî∑</div>
        <div class="sw-name">Blender</div>
        <div class="sw-desc">Cycles and EEVEE rendering with full asset packaging.</div>
        <div class="sw-tag">.blend</div>
      </div>
      <div class="software-card" onclick="showPage('submit')">
        <div class="sw-icon">üìê</div>
        <div class="sw-name">3ds Max</div>
        <div class="sw-desc">V-Ray, Corona, and Arnold support with plugin detection.</div>
        <div class="sw-tag">.max</div>
      </div>
      <div class="software-card" onclick="showPage('submit')">
        <div class="sw-icon">üéØ</div>
        <div class="sw-name">Cinema 4D</div>
        <div class="sw-desc">Full C4D scene support with Redshift and Arnold.</div>
        <div class="sw-tag">.c4d</div>
      </div>
      <div class="software-card" onclick="showPage('submit')">
        <div class="sw-icon">‚ú®</div>
        <div class="sw-name">Clarisse iFX</div>
        <div class="sw-desc">Isotropix Clarisse scene analysis and cloud submission.</div>
        <div class="sw-tag">.project</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DASHBOARD PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="page-dashboard">
  <div class="dashboard">
    <div class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-label">Main</div>
        <div class="sidebar-item active" onclick="showPage('dashboard')">
          <span class="icon">üìä</span> Overview
        </div>
        <div class="sidebar-item" onclick="showPage('submit')">
          <span class="icon">‚ûï</span> New Job
        </div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-label">Jobs</div>
        <div class="sidebar-item">
          <span class="icon">‚ö°</span> Active Renders
        </div>
        <div class="sidebar-item">
          <span class="icon">‚úÖ</span> Completed
        </div>
        <div class="sidebar-item">
          <span class="icon">üìÅ</span> All Jobs
        </div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-label">Account</div>
        <div class="sidebar-item">
          <span class="icon">üí≥</span> Credits
        </div>
        <div class="sidebar-item">
          <span class="icon">‚öôÔ∏è</span> Settings
        </div>
      </div>
    </div>

    <div class="main-content">
      <div class="page-header">
        <div>
          <div class="page-title">Dashboard</div>
          <div class="page-sub">Welcome back ‚Äî here's your render overview</div>
        </div>
        <button class="btn-primary" onclick="showPage('submit')">+ New Render</button>
      </div>

      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-label">Active Jobs</div>
          <div class="metric-value blue" id="metricActive">0</div>
          <div class="metric-change">‚Üë Live rendering</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Completed</div>
          <div class="metric-value green" id="metricDone">0</div>
          <div class="metric-change">Total finished</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Total Jobs</div>
          <div class="metric-value purple" id="metricTotal">0</div>
          <div class="metric-change">All time</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Platform</div>
          <div class="metric-value cyan">INT</div>
          <div class="metric-change">International #62</div>
        </div>
      </div>

      <div class="jobs-section">
        <div class="jobs-header">
          <div class="jobs-title">Recent Jobs</div>
          <button class="action-btn" onclick="loadJobs()">‚Üª Refresh</button>
        </div>
        <table class="jobs-table">
          <thead>
            <tr>
              <th>Task ID</th>
              <th>Project</th>
              <th>Software</th>
              <th>Frames</th>
              <th>Status</th>
              <th>Progress</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="jobsTableBody">
            <tr>
              <td colspan="7" style="text-align:center;color:var(--text3);padding:40px;font-size:14px;">
                No jobs yet ‚Äî <a href="#" onclick="showPage('submit')" style="color:var(--accent)">submit your first render</a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SUBMIT JOB PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="page-submit">
  <div class="main-content">
    <div class="page-header">
      <div>
        <div class="page-title">Submit New Job</div>
        <div class="page-sub">Upload your scene file and configure your render</div>
      </div>
      <button class="btn-secondary" onclick="showPage('dashboard')">‚Üê Back</button>
    </div>

    <div class="submit-layout">
      <!-- STEPS -->
      <div class="step-indicator">
        <div class="step active" id="step1">
          <div class="step-num">1</div>
          <div class="step-label">Upload File</div>
        </div>
        <div class="step-line"></div>
        <div class="step" id="step2">
          <div class="step-num">2</div>
          <div class="step-label">Configure</div>
        </div>
        <div class="step-line"></div>
        <div class="step" id="step3">
          <div class="step-num">3</div>
          <div class="step-label">Analyze</div>
        </div>
        <div class="step-line"></div>
        <div class="step" id="step4">
          <div class="step-num">4</div>
          <div class="step-label">Submit</div>
        </div>
      </div>

      <!-- STEP 1: UPLOAD -->
      <div id="formStep1">
        <div class="form-card">
          <div class="form-card-title">üìÅ Select Your Scene File</div>
          <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()" 
               ondragover="handleDragOver(event)" ondrop="handleDrop(event)" ondragleave="handleDragLeave(event)">
            <input type="file" id="fileInput" onchange="handleFileSelect(event)" 
                   accept=".ma,.mb,.hip,.hiplc,.blend,.max,.c4d,.project"/>
            <div class="upload-icon">‚òÅÔ∏è</div>
            <div class="upload-title">Drop your scene file here</div>
            <div class="upload-sub">or click to browse from your computer</div>
            <div class="upload-formats">
              <span class="format-tag">.ma</span>
              <span class="format-tag">.mb</span>
              <span class="format-tag">.hip</span>
              <span class="format-tag">.blend</span>
              <span class="format-tag">.max</span>
              <span class="format-tag">.c4d</span>
              <span class="format-tag">.project</span>
            </div>
          </div>
          <div class="file-selected" id="fileSelectedInfo">
            <span style="font-size:24px">üìÑ</span>
            <div>
              <div style="font-weight:700;font-size:14px" id="selectedFileName">file.ma</div>
              <div style="font-size:12px;color:var(--text2);font-family:var(--mono)" id="selectedFileSize">0 MB</div>
            </div>
            <span style="margin-left:auto;color:var(--success);font-size:20px">‚úì</span>
          </div>
        </div>

        <div class="form-card">
          <div class="form-card-title">üéØ Select Software</div>
          <div class="software-selector">
            <div class="sw-option" onclick="selectSoftware('maya', this)">
              <div class="sw-option-icon">üé¨</div>
              <div>
                <div class="sw-option-name">Maya</div>
                <div class="sw-option-ext">.ma .mb</div>
              </div>
            </div>
            <div class="sw-option" onclick="selectSoftware('houdini', this)">
              <div class="sw-option-icon">üåä</div>
              <div>
                <div class="sw-option-name">Houdini</div>
                <div class="sw-option-ext">.hip .hiplc</div>
              </div>
            </div>
            <div class="sw-option" onclick="selectSoftware('blender', this)">
              <div class="sw-option-icon">üî∑</div>
              <div>
                <div class="sw-option-name">Blender</div>
                <div class="sw-option-ext">.blend</div>
              </div>
            </div>
            <div class="sw-option" onclick="selectSoftware('3dsmax', this)">
              <div class="sw-option-icon">üìê</div>
              <div>
                <div class="sw-option-name">3ds Max</div>
                <div class="sw-option-ext">.max</div>
              </div>
            </div>
            <div class="sw-option" onclick="selectSoftware('cinema4d', this)">
              <div class="sw-option-icon">üéØ</div>
              <div>
                <div class="sw-option-name">Cinema 4D</div>
                <div class="sw-option-ext">.c4d</div>
              </div>
            </div>
            <div class="sw-option" onclick="selectSoftware('clarisse', this)">
              <div class="sw-option-icon">‚ú®</div>
              <div>
                <div class="sw-option-name">Clarisse</div>
                <div class="sw-option-ext">.project</div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-card">
          <div class="form-card-title">‚öôÔ∏è Render Settings</div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">Project Name</label>
              <input class="form-input" type="text" id="projectName" placeholder="My Render Project"/>
            </div>
            <div class="form-group">
              <label class="form-label">Software Version</label>
              <input class="form-input" type="text" id="softwareVersion" placeholder="e.g. 2023, 3.6, 19.5"/>
            </div>
            <div class="form-group">
              <label class="form-label">Frame Range</label>
              <input class="form-input" type="text" id="frameRange" placeholder="1-100[1]" value="1-10[1]"/>
            </div>
            <div class="form-group">
              <label class="form-label">Frame Step</label>
              <input class="form-input" type="text" id="frameStep" placeholder="1"/>
            </div>
          </div>
        </div>

        <button class="btn-primary" onclick="analyzeScene()" style="width:100%;padding:16px;font-size:16px;">
          üîç Analyze Scene ‚Üí
        </button>
      </div>

      <!-- STEP 3: RESULTS -->
      <div id="formStep3" style="display:none">
        <div class="analysis-card">
          <div class="analysis-header">
            <div>
              <div class="analysis-title">üìä Analysis Results</div>
              <div style="font-size:13px;color:var(--text2);margin-top:4px" id="analysisFileName">scene.ma</div>
            </div>
            <div class="analysis-status" id="analysisStatus">‚úÖ Analysis Complete</div>
          </div>
          <div class="analysis-body">
            <div class="analysis-grid">
              <div class="analysis-item">
                <div class="analysis-item-label">Software</div>
                <div class="analysis-item-value" id="resSoftware">‚Äî</div>
              </div>
              <div class="analysis-item">
                <div class="analysis-item-label">File Size</div>
                <div class="analysis-item-value" id="resSize">‚Äî</div>
              </div>
              <div class="analysis-item">
                <div class="analysis-item-label">Frame Range</div>
                <div class="analysis-item-value" id="resFrames">‚Äî</div>
              </div>
              <div class="analysis-item">
                <div class="analysis-item-label">Project</div>
                <div class="analysis-item-value" id="resProject">‚Äî</div>
              </div>
              <div class="analysis-item">
                <div class="analysis-item-label">Version</div>
                <div class="analysis-item-value" id="resVersion">‚Äî</div>
              </div>
              <div class="analysis-item">
                <div class="analysis-item-label">Status</div>
                <div class="analysis-item-value" id="resStatus" style="color:var(--success)">Ready</div>
              </div>
            </div>

            <div class="tips-list" id="tipsList"></div>

            <div style="display:flex;gap:12px;margin-top:32px;">
              <button class="btn-secondary" onclick="resetForm()" style="flex:1;padding:14px;">‚Üê Start Over</button>
              <button class="btn-primary" onclick="submitJob()" style="flex:2;padding:14px;font-size:15px;">
                üöÄ Submit to Render Farm ‚Üí
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 4: SUBMITTED -->
      <div id="formStep4" style="display:none">
        <div class="form-card" style="text-align:center;padding:60px 40px;">
          <div style="font-size:64px;margin-bottom:24px;">üöÄ</div>
          <div style="font-size:28px;font-weight:800;margin-bottom:12px;">Job Submitted!</div>
          <div style="color:var(--text2);font-size:15px;margin-bottom:32px;">
            Your scene is now queued on RenderRayCloud.<br>
            We'll process it using Fox Renderfarm's cloud infrastructure.
          </div>
          <div style="background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:32px;display:inline-block;min-width:280px;">
            <div style="font-size:12px;color:var(--text3);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Task ID</div>
            <div style="font-size:32px;font-weight:800;font-family:var(--mono);color:var(--accent)" id="submittedTaskId">‚Äî</div>
          </div>
          <div style="display:flex;gap:12px;justify-content:center;">
            <button class="btn-secondary" onclick="resetForm()">Submit Another</button>
            <button class="btn-primary" onclick="showPage('dashboard')">View Dashboard ‚Üí</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const API = 'http://localhost:8000';
let selectedFile = null;
let selectedSoftware = null;
let analysisResult = null;

// ‚îÄ‚îÄ‚îÄ PAGE NAVIGATION ‚îÄ‚îÄ‚îÄ
function showPage(name) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + name).classList.add('active');
  if (name === 'dashboard') loadJobs();
}

// ‚îÄ‚îÄ‚îÄ API HEALTH CHECK ‚îÄ‚îÄ‚îÄ
async function checkAPI() {
  try {
    const r = await fetch(API + '/api/health');
    const d = await r.json();
    document.getElementById('apiDot').className = 'api-dot connected';
    document.getElementById('apiStatusText').textContent = 'Connected';
  } catch {
    document.getElementById('apiDot').className = 'api-dot error';
    document.getElementById('apiStatusText').textContent = 'Backend offline';
  }
}

// ‚îÄ‚îÄ‚îÄ FILE HANDLING ‚îÄ‚îÄ‚îÄ
function handleFileSelect(e) {
  const file = e.target.files[0];
  if (file) setFile(file);
}

function handleDragOver(e) {
  e.preventDefault();
  document.getElementById('uploadZone').classList.add('dragover');
}

function handleDragLeave(e) {
  document.getElementById('uploadZone').classList.remove('dragover');
}

function handleDrop(e) {
  e.preventDefault();
  document.getElementById('uploadZone').classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  if (file) setFile(file);
}

function setFile(file) {
  selectedFile = file;
  document.getElementById('selectedFileName').textContent = file.name;
  document.getElementById('selectedFileSize').textContent = (file.size / 1024 / 1024).toFixed(2) + ' MB';
  document.getElementById('fileSelectedInfo').classList.add('show');

  // Auto-detect software
  const ext = file.name.split('.').pop().toLowerCase();
  const map = { ma: 'maya', mb: 'maya', hip: 'houdini', hiplc: 'houdini', blend: 'blender', max: '3dsmax', c4d: 'cinema4d', project: 'clarisse' };
  if (map[ext]) {
    const swOptions = document.querySelectorAll('.sw-option');
    swOptions.forEach(opt => {
      if (opt.querySelector('.sw-option-name').textContent.toLowerCase().replace(' ', '') === map[ext] ||
          opt.querySelector('.sw-option-ext').textContent.includes('.' + ext)) {
        selectSoftware(map[ext], opt);
      }
    });
  }
}

function selectSoftware(sw, el) {
  selectedSoftware = sw;
  document.querySelectorAll('.sw-option').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
}

// ‚îÄ‚îÄ‚îÄ ANALYZE ‚îÄ‚îÄ‚îÄ
async function analyzeScene() {
  if (!selectedFile) { showToast('Please select a file first', 'error'); return; }
  if (!selectedSoftware) { showToast('Please select software', 'error'); return; }

  const projectName = document.getElementById('projectName').value || 'MyProject';
  const softwareVersion = document.getElementById('softwareVersion').value || '2023';
  const frames = document.getElementById('frameRange').value || '1-10[1]';

  showLoading('Analyzing scene...', 'Detecting assets, plugins and dependencies');

  const formData = new FormData();
  formData.append('file', selectedFile);
  formData.append('software', selectedSoftware);
  formData.append('software_version', softwareVersion);
  formData.append('project_name', projectName);
  formData.append('frames', frames);

  try {
    const r = await fetch(API + '/api/analyze', { method: 'POST', body: formData });
    analysisResult = await r.json();
    hideLoading();
    showAnalysisResults(analysisResult);
  } catch (err) {
    hideLoading();
    // Show demo results if backend offline
    showAnalysisResults({
      status: 'analyzed',
      file: selectedFile.name,
      software: selectedSoftware,
      software_version: softwareVersion,
      project_name: projectName,
      frames: frames,
      file_size_mb: (selectedFile.size / 1024 / 1024).toFixed(2),
      tips: [
        { type: 'ok', message: 'Scene file loaded successfully' },
        { type: 'warn', message: 'Backend server not running ‚Äî connect your Python backend to submit real jobs' },
        { type: 'ok', message: 'All settings configured correctly' }
      ]
    });
  }
}

function showAnalysisResults(data) {
  document.getElementById('formStep1').style.display = 'none';
  document.getElementById('formStep3').style.display = 'block';

  // Update steps
  document.getElementById('step1').classList.add('done');
  document.getElementById('step2').classList.add('done');
  document.getElementById('step3').classList.add('active');

  document.getElementById('analysisFileName').textContent = data.file || selectedFile?.name;
  document.getElementById('resSoftware').textContent = data.software?.toUpperCase() || '‚Äî';
  document.getElementById('resSize').textContent = (data.file_size_mb || 0) + ' MB';
  document.getElementById('resFrames').textContent = data.frames || '‚Äî';
  document.getElementById('resProject').textContent = data.project_name || '‚Äî';
  document.getElementById('resVersion').textContent = data.software_version || '‚Äî';

  if (data.status === 'error') {
    document.getElementById('resStatus').textContent = 'Error';
    document.getElementById('resStatus').style.color = 'var(--error)';
    document.getElementById('analysisStatus').textContent = '‚ö†Ô∏è Analysis Error';
  }

  // Tips
  const tipsList = document.getElementById('tipsList');
  if (data.tips && data.tips.length > 0) {
    tipsList.innerHTML = '<div class="tips-title">Scene Analysis Notes</div>';
    data.tips.forEach(tip => {
      const t = typeof tip === 'string' ? { type: 'warn', message: tip } : tip;
      const cls = t.type === 'ok' ? 'tip-ok' : t.type === 'error' ? 'tip-error' : 'tip-warn';
      const icon = t.type === 'ok' ? '‚úì' : t.type === 'error' ? '‚úó' : '‚ö†';
      tipsList.innerHTML += `<div class="tip-item ${cls}">${icon} ${t.message || JSON.stringify(t)}</div>`;
    });
  }

  showToast('Analysis complete!', 'success');
}

// ‚îÄ‚îÄ‚îÄ SUBMIT JOB ‚îÄ‚îÄ‚îÄ
async function submitJob() {
  showLoading('Submitting job...', 'Uploading assets to Fox Renderfarm');

  try {
    const formData = new FormData();
    formData.append('file_path', analysisResult?.file_path || '');
    formData.append('software', selectedSoftware);
    formData.append('project_name', document.getElementById('projectName').value || 'MyProject');
    formData.append('frames', document.getElementById('frameRange').value || '1-10[1]');
    formData.append('software_version', document.getElementById('softwareVersion').value || '2023');

    const r = await fetch(API + '/api/submit', { method: 'POST', body: formData });
    const data = await r.json();
    hideLoading();

    document.getElementById('submittedTaskId').textContent = data.task_id || 'DEMO-001';
    showSubmittedStep();
    showToast('Job submitted successfully!', 'success');
  } catch {
    hideLoading();
    document.getElementById('submittedTaskId').textContent = 'DEMO-' + Math.floor(Math.random() * 99999);
    showSubmittedStep();
    showToast('Demo mode ‚Äî connect backend to submit real jobs', 'success');
  }
}

function showSubmittedStep() {
  document.getElementById('formStep3').style.display = 'none';
  document.getElementById('formStep4').style.display = 'block';
  document.getElementById('step3').classList.add('done');
  document.getElementById('step4').classList.add('active');
}

// ‚îÄ‚îÄ‚îÄ LOAD JOBS ‚îÄ‚îÄ‚îÄ
async function loadJobs() {
  try {
    const r = await fetch(API + '/api/jobs');
    const data = await r.json();
    renderJobsTable(data.jobs || []);
    updateMetrics(data.jobs || []);
  } catch {
    renderJobsTable([]);
  }
}

function renderJobsTable(jobs) {
  const tbody = document.getElementById('jobsTableBody');
  if (!jobs || jobs.length === 0) {
    tbody.innerHTML = `<tr><td colspan="7" style="text-align:center;color:var(--text3);padding:40px;font-size:14px;">
      No jobs yet ‚Äî <a href="#" onclick="showPage('submit')" style="color:var(--accent)">submit your first render</a>
    </td></tr>`;
    return;
  }
  tbody.innerHTML = jobs.map(job => {
    const status = (job.task_status || 'queued').toLowerCase();
    const statusMap = { rendering: 'rendering', done: 'done', system_done: 'done', queued: 'queued', error: 'error' };
    const cls = statusMap[status] || 'queued';
    const progress = job.render_percent || 0;
    return `<tr>
      <td style="font-family:var(--mono);color:var(--accent)">#${job.id || job.task_id}</td>
      <td style="font-weight:600">${job.project_name || '‚Äî'}</td>
      <td>${job.software || '‚Äî'}</td>
      <td style="font-family:var(--mono)">${job.frames || '‚Äî'}</td>
      <td><span class="status-badge status-${cls}">${status.toUpperCase()}</span></td>
      <td>
        <div class="progress-bar"><div class="progress-fill" style="width:${progress}%"></div></div>
        <div style="font-size:11px;color:var(--text3);margin-top:4px;font-family:var(--mono)">${progress}%</div>
      </td>
      <td>
        <button class="action-btn" onclick="downloadJob(${job.id})">‚Üì DL</button>
        <button class="action-btn" onclick="stopJob(${job.id})">‚èπ Stop</button>
      </td>
    </tr>`;
  }).join('');
}

function updateMetrics(jobs) {
  const active = jobs.filter(j => ['rendering','started'].includes((j.task_status||'').toLowerCase())).length;
  const done = jobs.filter(j => ['done','system_done'].includes((j.task_status||'').toLowerCase())).length;
  document.getElementById('metricActive').textContent = active;
  document.getElementById('metricDone').textContent = done;
  document.getElementById('metricTotal').textContent = jobs.length;
}

async function stopJob(id) {
  try {
    await fetch(`${API}/api/jobs/${id}/stop`, { method: 'POST' });
    showToast('Job stopped', 'success');
    loadJobs();
  } catch { showToast('Error stopping job', 'error'); }
}

async function downloadJob(id) {
  try {
    const fd = new FormData();
    fd.append('local_path', '/tmp/renderraycloud/outputs');
    await fetch(`${API}/api/jobs/${id}/download`, { method: 'POST', body: fd });
    showToast('Download started!', 'success');
  } catch { showToast('Error downloading', 'error'); }
}

// ‚îÄ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ‚îÄ
function resetForm() {
  selectedFile = null;
  selectedSoftware = null;
  analysisResult = null;
  document.getElementById('formStep1').style.display = 'block';
  document.getElementById('formStep3').style.display = 'none';
  document.getElementById('formStep4').style.display = 'none';
  document.getElementById('fileSelectedInfo').classList.remove('show');
  document.getElementById('fileInput').value = '';
  document.querySelectorAll('.sw-option').forEach(o => o.classList.remove('selected'));
  document.querySelectorAll('.step').forEach(s => { s.classList.remove('active','done'); });
  document.getElementById('step1').classList.add('active');
}

function showLoading(text, sub) {
  document.getElementById('loadingText').textContent = text;
  document.getElementById('loadingSub').textContent = sub;
  document.getElementById('loadingOverlay').classList.add('show');
}

function hideLoading() {
  document.getElementById('loadingOverlay').classList.remove('show');
}

function showToast(msg, type = 'success') {
  const toast = document.getElementById('toast');
  const icon = type === 'success' ? '‚úÖ' : '‚ùå';
  document.getElementById('toastIcon').textContent = icon;
  document.getElementById('toastMsg').textContent = msg;
  toast.className = `toast ${type} show`;
  setTimeout(() => toast.classList.remove('show'), 3500);
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ
checkAPI();
setInterval(checkAPI, 30000);

// AUTO REFRESH
setInterval(function(){ if(document.getElementById("page-dashboard").classList.contains("active")){ loadJobs(); } }, 10000);
</script>
</body>
</html>
